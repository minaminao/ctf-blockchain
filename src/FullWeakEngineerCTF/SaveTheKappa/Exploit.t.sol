// SPDX-License-Identifier: UNLICENSED
pragma solidity ^0.8.20;

import {Test, console} from "forge-std/Test.sol";
import {Exploit} from "./Exploit.sol";
import {Setup} from "./challenge/Setup.sol";

contract ExploitTest is Test {
    address playerAddr = makeAddr("player");
    Setup setup;

    function setUp() public {
        vm.deal(playerAddr, 1 ether);
        setup = new Setup{value: 10 ether}();
    }

    function test() public {
        vm.startPrank(playerAddr, playerAddr);

        Exploit exploit = new Exploit();
        exploit.exploit{value: 1 ether}(payable(setup.getBank()));

        assert(setup.isSolved());

        vm.stopPrank();
    }
}
